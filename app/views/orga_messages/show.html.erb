<section>
  <table class="table">
    <tbody>
    <tr>
      <th><%= OrgaMessage.human_attribute_name('from') %></th>
      <td><%= @message.from %></td>
    </tr>
    <tr>
      <th><%= OrgaMessage.human_attribute_name('recipient') %></th>
      <td><%= @message.sent? ? @message.recipient : render_recipient_group(@message.recipient, current_user) %></td>
    </tr>
    <tr>
      <th><%= OrgaMessage.human_attribute_name('created_at') %></th>
      <td><%= l @message.created_at, format: :short %></td>
    </tr>
    <tr>
      <th><%= OrgaMessage.human_attribute_name('author') %></th>
      <td><%= @message.author.full_name %></td>
    </tr>
    <tr>
      <th><%= OrgaMessage.human_attribute_name('subject') %></th>
      <td><%= @message.subject %></td>
    </tr>
    <% if @message.sent? %>
        <tr>
          <th><%= OrgaMessage.human_attribute_name('sent_at') %></th>
          <td><%= l @message.sent_at, format: :short %></td>
        </tr>
        <tr>
          <th><%= OrgaMessage.human_attribute_name('sender') %></th>
          <td><%= @message.sender.full_name %></td>
        </tr>
    <% end %>
    </tbody>
  </table>
  <div class="admin-mail-body" style="background-color: transparent; padding-left: 8px;">
    <%= @message.body.html_safe %>
    <%= render partial: 'mailer/footer', locals: { type: @message.content_type } %>
  </div>
</section>

<section>
  <%= link_to t('general.action.back'), orga_messages_path, class: 'btn-default btn' %>
  <%= link_to t('general.action.edit'), edit_orga_message_path(@message), class: 'btn-default btn' unless @message.sent? %>
  <%= link_to t('general.action.delete'), orga_message_path(@message), method: :delete, class: 'btn-default btn',
              data: { confirm: t('orga_message.message.really_destroy') } if policy(@message).destroy? %>
  <%= link_to t('orga_message.action.send_now'), send_message_orga_message_path(@message), class: 'btn-default btn',
              data: { confirm: t('orga_message.message.really_send') } unless @message.sent? %>
</section>