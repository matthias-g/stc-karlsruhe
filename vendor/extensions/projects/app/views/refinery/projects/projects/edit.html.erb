<% content_for :headsection do %>
  <h1><%= 'Projekt "' + @project.title + '" bearbeiten' %></h1>
    <%= render '/refinery/admin/error_messages',
        :object => @project,
        :include_object_name => true %>
<% end %>

<% content_for :body do %>
  <div class="section nopadding" id="edit-project">
    <%= form_for [refinery, :projects, @project] do |f| -%>
    <div class="prj-leftcol">
      <div class="lightbox">
          <div class='field'>
            <%= f.label :max_volunteer_count -%>
            <%= f.text_field :max_volunteer_count, :size => 5 -%>
          </div>
      </div>

      <div class="prj-cats lightbox">
          <div class='field'>
            <%= f.label :types -%>
            <%= f.collection_select(:type_ids, Refinery::Projects::Type.all, :id, :title, {:selected => @project.types.collect {|t| t.id}}, :multiple => true)  -%>
          </div>
          <div class='field'>
            <%= f.label :volunteer_types -%>
            <%= f.collection_select(:volunteer_type_ids, Refinery::Projects::VolunteerType.all, :id, :title, {:selected => @project.volunteer_types.collect {|t| t.id}}, :multiple => true)  -%>
          </div>
          <div class='field'>
            <%= f.label :sectors -%>
            <%= f.collection_select(:sector_ids, Refinery::Projects::Sector.all, :id, :title, {:selected => @project.sectors.collect {|t| t.id}}, :multiple => true)  -%>
          </div>
          <div class='field'>
            <%= f.label :days -%>
            <%= f.collection_select(:day_ids, Refinery::Projects::Day.all, :id, :title, {:selected => @project.days.collect {|t| t.id}}, :multiple => true)  -%>
          </div>
          <div class='field'>
            <%= f.label :locations -%>
            <%= f.collection_select(:location_ids, Refinery::Projects::Location.all, :id, :title, {:selected => @project.locations.collect {|t| t.id}}, :multiple => true)  -%>
          </div>
      </div>
    </div>

    <div class="prj-rightcol lightbox">
      <div class="prj-rightbox lightbox">
        <div class='field'>
          <%= f.label :image -%>
          <%= render '/refinery/admin/image_picker',
                     :f => f,
                     :field => :image_id,
                     :image => @project.image,
                     :toggle_image_display => false -%>
        </div>
        <div class='field'>
          <%= f.text_field :latitude, :hidden => true %>
          <%= f.text_field :longitude, :hidden => true %>
        </div>
      </div>
      <div class='field'>
        <%= f.label :title -%>
        <%= f.text_field :title, :class => 'larger widest' -%>
      </div>
      <div class='field'>
        <%= f.label :description -%>
        <%= f.text_area :description %>
      </div>
    </div>
    <div class="prj-rightcol lightbox">
      <%= render '/refinery/admin/form_actions', :f => f,
            :continue_editing => false,
            :delete_title => t('delete', :scope => 'refinery.projects.admin.projects.project'),
            :delete_confirmation => t('message', :scope => 'refinery.admin.delete', :title => @project.title),
            :cancel_url => refinery.projects_project_path(@project) -%>
    </div>
    <% end -%>
  </div>
<% end %>